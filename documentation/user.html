<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>jsRealB - Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="../dist/jsRealB-dmefr.min.js"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="user.js"></script>
    <script src="user-infos.js"></script>
</head>
<body>
<!-- top menus -->
    <span class="dropdown" id="quicklinks">
      <span lang="fr">Aller à ↓</span><span lang="en">Goto ↓</span>
      <span class="dropdown-content"></span>
    </span>
    <span id="langSelect">[<span lang="en">FR</span><span lang="fr">EN</span>]</span>
<!-- start of page  -->
    <h1><span class="jsr">jsRealB</span> - Documentation</h1>
    <p lang="fr"><span class="jsr">jsRealB</span> est un réalisateur de texte pour l'anglais et le français écrit en Javascript. Il peut être utilisé soit à l'intérieur d'une page web comme celle-ci dont tous les exemples sont réalisés dynamiquement, ou comme module <code>Node.js</code>.</p>
    <p lang="en"><span class="jsr">jsRealB</span> is a text realizer for French and English written in Javascript. It can be used either within a web page such as this one whose examples are dynamically realized or as a <code>Node.js</code> module.</p>
    <h2 lang="fr" id="constituants">Constituants</h2><h2 lang="en" id="constituents">Constituents</h2>
    <div id="terminalsSect"></div>
    <div id="syntagmesSect"></div>
    
    <h2 id="optionsFr" lang="fr">Déclinaisons et conjugaisons</h2><h2 id="optionsEn" lang="en">Declension and conjugation</h2>
    <div id="optionsSect"></div>
    <p lang="en">Continuous tense for verbs can obtained by setting the <a href="#sentType">sentence type</a> to <code>.typ({prog:true})</code> </p>
    
    <h2 lang="fr" id="pronoms">Pronoms</h2><h2 lang="en" id="pronouns">Pronouns</h2>
    <p lang="fr">Le pronoms qui sont dans le lexique sont à la 1ère personne du singulier. Pour obtenir les autres, il faut
    spécifier la personne, le nombre et éventuellement le genre. Ce mécanisme s'applique aussi pour les
    pronoms <code>me</code> et <code>moi-même</code> et pour le déterminant <code>mon</code>.</p>
    <p lang="en">Pronouns in the lexicon are at the first person singular. To get the other forms, the gender, the number and
    the person must be specified. The same option mechanism can be used for the pronouns <code>mine</code> and <code>myself</code> and
    for the determiner <code>my</code>.</p>
    <div id="pronomsSect"></div>
    
    <h2 lang="fr" id="formattage">Mise en forme</h2><h2 lang="en" id="formatting">Formatting</h2>
    <p lang="fr">La ponctuation disponible dépend du contenu des règles qui indiquent l'espacement avant et après chaque signe.</p>
    <p lang="en">Available punctuation depends on rules that define the spacing to add before and after the punctuation sign.</p>
    <div id="formatSect"></div>
    
    <h2 lang="fr" id="modSN">Modification du syntagme nominal</h2><h2 lang="en" id="npMod">Noun phrase modification</h2>
    <div id="nPmods"></div>
    
    <h2 lang="fr" id="changeType">Modification du type de phrase</h2><h2 lang="en" id="typeChange">Sentence type modification</h2>
    <p lang="fr">Les phrases sont construites à la forme active, mais il est possible d'en modifier le type pour obtenir des phrases négatives, progressives, interrogatives ou passives.  Ces modifications sont de la forme <code>S(...).typ({...})</code> Il est possible de combiner plusieurs modifications en spécifiant plusieurs paires clés-valeurs dans l'objet paramètre de <code>type</code>.</p>
    <p lang="en">Sentences are built at the active voice, but their type can be modified in order to get negative, progressive, interrogative or passive sentences. These modifications are indicated by <code>S(...).typ({...})</code> Modifications can be combined by specifying multiple key value pairs in the object which is the parameter of  <code>type</code>.</p>
    <div id="sentType"></div>
    
    <h2 lang="fr" id="dateFr">Date</h2><h2 lang="en" id="dateEn">Date</h2>
    <div lang="fr">
        <p><code>DT</code> accepte en paramètre soit une date sous forme d'une chaîne de caractères ou un <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Date">objet Javascript <code>Date</code></a>.La chaine de caractères en entrée doit être dans un format reconnu par la méthode <code>Date.parse()</code>, donc dans le format <a href="https://tools.ietf.org/html/rfc2822#page-14">IETF-compliant RFC 2822</a> ou <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15">ISO8601</a>.</p>
        <p><strong>Attention:</strong> Le comportement de l'objet <code>Date()</code> diffère selon le navigateur. Il est fortement conseillé de fixer le fuseau horaire sinon il sera déterminé par le navigateur (voir ci-dessous). </p>
    </div>
    <div lang="en">
        <p><code>DT(...)</code> takes as parameter either a date as a <code>String</code> or a <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Date"><code>Date</code> javascript object</a>.The input string must be a recognized format by <code>Date.parse()</code>: either <a href="https://tools.ietf.org/html/rfc2822#page-14">IETF-compliant RFC 2822</a> or <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15">ISO8601</a> format.</p>
        <p><strong>Warning:</strong> The behavior of <code>Date()</code> depends on the browser. The timezone should be specified otherwise it might be given a different value according to the browser. </p>
    </div>

    <div id="dateCreation"></div>
    <div id="dateOption"></div>
    
    <h2 lang="fr" id="nombres">Nombres</h2><h2 lang="en" id="numbers">Numbers</h2>
    <p lang="fr">On crée un nombre avec <code>NO(...)</code> dont le paramètre est soit un nombre entier ou réel ou une chaîne qui peut être analysée comme un nombre.</p>
    <p lang="en">A number is created with <code>NO(...)</code> whose parameter is either a number (integer or real) or a string that can be parsed as a number. In English, numbers less than one hundred written in letters can also be used as input.</p>
    <div id="numberFormat"></div>
    <div id="numberAgreement"></div>
    
    <h2 lang="fr" id="javascript-fr">Javascript</h2><h2 lang="en" id="javascript-en">Javascript</h2>
    <h3><code>.clone()</code></h3>
        <p lang="fr">Comme les options modifient le constituant dans toutes les utilisations subséquentes, il est souvent pratique de pouvoir garder la version originale pour la réutiliser et la modifier indépendamment. L'option <code>clone()</code> permet de copier un syntagme pour utilisation dans des contextes différents.</p>
        <p lang="en">As options modify the constituent for all following use, it is often useful to keep the original constituent and modify it independently. The <code>clone()</code> option allows reusing a constituent in different contexts.</p>
<div id="cloneUse"></div>
    
    <h3><code>.add(<em>element</em>,<em>position</em>)</code></h3>
        <p lang="fr">Ajout d'un nouveau syntagme <code>element</code> comme enfant à un syntagme existant. Le paramètre entier <code>position</code> est facultatif et spécifie la position (à partir de 0) dans le syntagme. Par défaut, l'élément est ajouté à la fin.</p>
        <p lang="en">Add a new phrase <code>element</code> as a child of an existing phrase. The second optional parameter <code>position</code> is an integer that specifies its position (counting from 0). By default, the element is added as the last child.</p>
<div id="addUse"></div>
    <h3><code>.toSource()</code></h3>
    <p lang="fr">Cette fonction retourne une version <em>chaîne</em> d'une expression <span class="jsr">jsRealB</span>, ceci peut être utile pour la mise au point d'une expression complexe. </p>
    <p lang="en">This function returns a <em>string</em> version of a  <span class="jsr">jsRealB</span> expression, this can be useful for debugging complex expressions. </p>
    <h3><code>getLanguage()</code></h3>
    <p lang="fr">Cette fonction retourne le langage courant de réalisation: <code>"fr"</code> pour le français et <code>"en"</code> pour l'anglais.</p>
    <p lang="en">This function returns the current realization language: <code>"fr"</code> for French and <code>"en"</code> for English.</p>
    <h3 id="loadEnFr"><code>loadEn(trace,lenient), loadFr(trace,lenient)</code></h3>
    <p lang="fr">Ces fonctions permettent de changer dynamiquement la langue du réalisateur, dans une version bilingue évidemment (voir plus bas). Les paramètres booléens optionnels (<em>false</em> si non spécifiés) indiquent:
        <ul lang="fr">
            <li><em>trace</em> : qu'on désire qu'un message apparaisse sur la console à la fin du chargement du langage;</li>
            <li><em>lenient</em> :si les terminaux acceptent des formes fléchies qui seront lemmatisées avant d'être traitées.</li>
        </ul>
    </p>
    <p lang="en">These functions allows changing the realisation language, in a bilingual version obviously (see below). The optional boolean parameters (<em>false</em> if not given) control that:
        <ul lang="en">
            <li><em>trace</em> : whether a message is written on the console after the loading;</li>
            <li><em>lenient</em> :constructors for terminal accept lemmatized forms instead of only the base form.</li>
        </ul>
    </p>

    <h2 lang="fr" id="pageWeb">Chargement dans une page web</h2><h2 lang="en" id="webPage">Loading in a web page</h2>
    <p lang="fr">Une des versions de <span class="jsr">jsRealB</span> devrait être chargée avec un élément <code>script</code> selon le type de réalisations prévues.</p>
    <p lang="en">One version of <span class="jsr">jsRealB</span> should be loaded with a <code>script</code> element according to the expected type of realization.</p>
    <dl>
        <dt><code>jsRealB-en.js</code></dt><dt><code>jsRealB-dme.js</code></dt>
        <dd lang="fr">pour la réalisation de phrases en anglais. <code>en</code> utilise un lexique réduit d'environ 3000 entrées les plus courantes de l'anglais; <code>dme</code> utilise un lexique beaucoup plus complet d'environ 37&nbsp;000 mots.</dd>
        <dd lang="en">for English realization. <code>en</code> uses a small lexicon of arount 3&nbsp;000 entries; <code>dme</code> uses a bigger lexicon of arount 37&nbsp;000 words.</dd>
    </dl>
    <dl>
        <dt><code>jsRealB-fr.js</code></dt></dt>
        <dd lang="fr">pour la réalisation de phrases en français. <code>fr</code> utilise un lexique réduit d'environ 3000 entrées les plus courantes du français.</dd>
        <dd lang="en">for French realization. <code>fr</code> use a small lexicon of about 3&nbsp;000 most common words of French.</dd>
    </dl>
    <dl>
        <dt><code>jsRealB-enfr.js</code></dt><dt><code>jsRealB-dmefr.js</code></dt>
        <dd lang="fr">pour la réalisation de phrases en anglais et en français. <code>enfr</code> utilise un lexique réduit d'environ 3&nbsp;000 entrées les plus courantes de l'anglais et un lexique de 3&nbsp;000 mots du français; <code>dmefr</code> utilise un lexique beaucoup plus complet d'environ 37&nbsp;000 mots de l'anglais et un lexique de 3&nbsp;000 mots du français.</dd>
        <dd>
        <dd lang="en">for English and French realization. <code>enfr</code> uses two small lexicons for both French and English; <code>dmefr</code> uses a big lexicon for English and a small lexicon for French.</dd>
        <dd>
            <ul>
                <li><a href="#loadEnFr"><code>loadFr(...)</code></a> <span lang="en">should be called before starting realizing French sentences</span><span lang="fr">devrait être appelé avant de réaliser des phrases en français</span></li>
                <li><a href="#loadEnFr"><code>loadEn(...)</code></a> <span lang="en">should be called before starting realizing English sentences.</span><span lang="fr">devrait être appelé avant de réaliser des phrases en anglais</span></li>
            </ul>
            <div lang="fr">Il est possible d'appeler ces fonctions aussi souvent que nécessaire pour changer le langage de réalisation courant.</div><div lang="en">These functions can be called as often as necessary to change the current language.</div></dd>
    </dl>
        
<p lang="fr">Idéalement, vous installerez votre propre version de <span class="jsr">jsRealB</span> à partir des sources du <a href="https://github.com/rali-udem/jsRealB">GitHub</a> et vous la référencerez depuis l'élément <code>script</code>. Mais vous pouvez aussi télécharger une version déjà <i>minifiée</i> à partir de ce <a href="https://github.com/rali-udem/jsRealB/tree/master/dist">répertoire</a>.</p>
<p lang="en">Ideally you should install your own version of <span class="jsr">jsRealB</span> from the <a href="https://github.com/rali-udem/jsRealB">GitHub</a> sources and you will refer to it using a <code>script</code> element. But you can also get <i>minified</i> versions from <a href="http://rali.iro.umontreal.ca/JSrealB/current/dist">this directory</a>.</p>
    <p lang="fr">Des exemples d'intégration dans une page web peuvent être trouvés à la section <em>Démonstrations</em> de <a href="http://rali.iro.umontreal.ca/JSrealB/current/documentation/in_action/LISEZMOI.html">cette page</a></p>
    <p lang="en">Examples of web page integration can be found at the <em>Demonstrations</em> section of <a href="http://rali.iro.umontreal.ca/JSrealB/current/">this page</a></p>

<h2 lang="fr" id="moduleNode">Module <code>Node.js</code></h2><h2 lang="en" id="nodeModule"><code>Node.js</code> Module</h2>
    <p lang="fr">Les versions de <span class="jsr">jsRealB</span> décrites à la section précédente peuvent aussi être utilisées avec <code>node.js</code> en utilisant une instruction de la forme <code>jsRealB=require("...")</code></p>
    <p lang="en">The <span class="jsr">jsRealB</span> versions  can also be used with <code>node.js</code> with an instruction like <code>jsRealB=require("...")</code></p>
    <p lang="fr">Un exemple simple d'utilisation du module <code>Node.js</code> est ce <a href="../build/filter-dme.js">filtre Unix</a> qui accepte une expression <span class="jsr">jsRealB</span> sur une seule ligne et retourne sa réalisation en anglais. </p>
    <p lang="en">A simple example of the use of the <code>Node.js</code> module is this <a href="../build/filter-dme.js">Unix filter</a> which transforms a <span class="jsr">jsRealB</span> expression on a single line and returns the corresponding English realisation.</p>
    <p lang="fr"><strong>Trucs pratiques</strong>:</p> 
    <p lang="en"><strong>Useful tricks</strong>:</p>
    <ul>
    <li lang="fr">l'accès aux constructeurs de syntagmes du module Node doit se faire de la façon suivante <code>jsRealB.S(...)</code> ce qui peut s'avérer laborieux. Il est donc plus pratique de définir les constructeurs dans le contexte global (même si ceci pourrait être considéré comme une mauvaise pratique en génie logiciel) en exécutant le code suivant:</li>
    <li lang="en">phrase constructors from the Node module must be called as <code>jsRealB.S(...)</code> which can be tedious. It is thus more convenient (although it could be seen as bad software engineering practice) to define these constructors in the global namespace by executing the following code:</li>
<pre>
    for (var v in jsRealB)
        eval(v+"=jsRealB."+v);
</pre>
    <li lang="fr">Un script javascript peut vérifier s'il est utilisé comme module <code>node.js</code> avec le test suivant:</li>
    <li lang="en">A javascript script can check if it used as <code>node.js</code> module with the following:</li>
    <pre>
    if (typeof module !== 'undefined' && module.exports) {
        ...
    }
    </pre>
</ul>
<h2 lang="fr" id="extensionVoc">Extension du vocabulaire</h2><h2 lang="en" id="vocExtension">Vocabulary extension</h2>
<p lang="fr">
Il est possible d'ajouter de nouveaux entrées ou d'ajouter des informations à une entrée existante au lexique courant à l'aide de la fonction <code>addToLexicon(<em>entrée</em>,<em>infos</em>)</code>. Pour chaque entrée, il faut indiquer la ou les catégories; pour chaque catégorie, en indiquer les propriétés et la ou les tables de déclinaison ou conjugaison correspondantes. Par exemple, <code>addLexicon("jsRealB",{"N":{"g":"m", "pe":3, "tab": ["nI"]})</code> ajoutera le mot <code>jsRealB</code> comme nom masculin invariable. Cette fonction peut aussi être appelée avec un seul paramètre qui est un objet dont la clé est le lemme. L'exemple précédent peut donc s'écrire: <code>addToLexicon({"tsunami":{"N":{"tab":["n1"]}}})</code>.
</p>
<p lang="fr">
Pour trouver les informations à ajouter, le plus simple est de copier les informations d'un mot du lexique qui se conjugue ou se décline de la même façon. L'<a href="../IDE/index.html">IDE de jsRealB</a> permet de consulter les informations du lexique; la fonction javascript <code>getLexicon(<em>entrée</em>)</code> retourne les valeurs courantes d'une entrée. 
Pour enlever une entrée, il faut faire un appel du genre <code>addToLexicon(<em>entrée</em>,undefined)</code>. 
</p>
<p lang="en">
New entries can be added to the current lexicon or new information can be added to an existing entry using the  <code>addToLexicon(<em>entry</em>,<em>new informations</em>)</code> function. For each entry, its categories must be given; for each category, their properties and the declension or conjugation tables must be specified. For example,
<code>addToLexicon("tsunami",{"N":{"tab":["n1"]}})</code> will add the word <code>tsunami</code> as a noun. This function can also be called with a single object argument in which the lemma is the key. The preceding example can also be written as: <code>addToLexicon({"tsunami":{"N":{"tab":["n1"]}}})</code>.
</p>
<p lang="en">
In order to find the informations to add, the simplest way is to copy the lexicon information for a similar word already in the lexicon. 
The <a href="../IDE/index.html">jsRealB IDE</a> provides access to the lexicon information; <code>getLemma(<em>entry</em>)</code> also returns the lexical information of an entry. 
To remove an entry a call of the form
<code>addToLexicon(<em>entry</em>,undefined)</code> should be used.</p>

<h2 lang="fr" id="selectionVar">Sélection de variantes</h2><h2 lang="en" id="varSelection">Variant selection</h2>
<p lang="fr">
La fonction <code>oneOf(e<sub>1</sub>,e<sub>2</sub>,...)</code> (où <code>e<sub>i</sub></code> est est une valeur) choisit un <code>e<sub>i</sub></code> au hasard. En <code>jsRealB</code>, ces éléments sont souvent des constructeurs correspondant à des structures de phrases différentes. Si <code>e<sub>1</sub></code> est une liste alors la sélection est faite dans cette liste, en ignorant les autres paramètres.
</p>
<p lang="fr">Pour éviter que tous les éléments soient évalués avant la sélection, il suffit de <em>fonctionaliser</em> l'expression en une fonction sans paramètre en la préfixant par <code>()=></code>. Une fois l'élément choisi, <code>oneOf</code> vérifie si la valeur est une fonction et si c'est le cas, il retourne le résultat de l'appel. Par exemple,
<code>ofOne(()=>N("amour"),()=>N("amitié"))</code> permet de choisir entre les deux noms sans évaluer les deux constructeurs. Dans ce cas, très simple, il aurait été aussi possible d'écrire <code>N(ofOf("amour","amitié"))</code>.
</p>
<p lang="en">
The function <code>oneOf((e<sub>1</sub>,e<sub>2</sub>,...)</code> (where <code>e<sub>i</sub></code> is a list) selects a random element of <code>e<sub>i</sub></code>. In <code>jsRealB</code>, these elements are often constructors corresponding to different phrase structures. If <code>e<sub>1</sub></code> is a list, the selection is performed in this list, ignoring other parameters.
</p>
<p lang="en">To avoid the evaluation of all elements before the selection, it is possible to <em>functionalize</em> a expression into a function with no formal parameter by prefixing it with <code>()=></code>. Once the element is selected, <code>oneOf</code> checks if the value is a function and, if it is so, it returns the value of the called function. For exemple,
<code>oneOf(()=>V("love"),()=>V("like"))</code> allows choosing between the two verbs without evaluating both constructors. In this simplistic case, this could have also been written as <code>V(oneOf("love","like"))</code>.</p>


<h2 lang="fr" id="plusDinfo">Informations complémentaires</h2><h2 lang="en" id="moreInfo">More Information</h2>
<ul>
    <li><a href="http://rali.iro.umontreal.ca/rali/?q=fr/jsrealb-realisateur-bilingue-de-texte" lang="fr">Historique des versions et démonstrations</a><a href="http://rali.iro.umontreal.ca/rali/?q=en/jsrealb-bilingual-text-realiser" lang="en">Previous versions and demos</a></li>
    <li><a href="http://rali.iro.umontreal.ca/rali/sites/default/files/publis/JSrealB-ENGL2015.pdf">Demo paper at ENLG-2015</a></li>
    <li>Daoust, N., and G. Lapalme, <em>JSreal: A Text Realizer for Web Programming</em>, Language Production, Cognition, and the Lexicon - a Festschrift in honor of Michael Zock, Text, Speech and Language Technology, Vol 48: Springer, pp. 363-378, 2014. [<a href="http://rali.iro.umontreal.ca/rali/sites/default/files/publis/JSreal.pdf">PDF</a>]</li>
    <li><a href="https://github.com/rali-udem/JSrealB" lang="fr">Dépot GitHub</a><a href="https://github.com/rali-udem/JSrealB" lang="en">GitHub repository</a></li>
</ul>

<footer>Contact: <a href="lapalme@iro.umontreal.ca">Guy Lapalme</a> <a href="http://rali.iro.umontreal.ca">RALI</a>, Université de Montréal, CANADA. 2018.</footer>
</body>
</html>
